---
const { title = "StarboyChad.com" } = Astro.props;
const path = Astro.url.pathname;

const description =
  "Starboy Chad — Tales from the Neon Wasteland. Immersive Cyberpunk + Fallout playthroughs, curated mod collections, and original mods in development.";

const route = path === "/" ? "/home" : path;
const pageLabel = path === "/" ? "HOME" : path.replace("/", "").toUpperCase();

// Per-page “personality” lines
const logsByRoute: Record<string, { t: string; m: string; c?: string; d?: number }[]> = {
  "/": [
    { t: "00:00:01", m: "NODE ONLINE // STARBOYCHAD.COM", c: "cyan", d: 0 },
    { t: "00:00:03", m: "BOOT SEQUENCE: OK", c: "ok", d: 350 },
    { t: "00:00:05", m: "LOADING: NEON WASTELAND OPS", c: "pink", d: 650 },
    { t: "00:00:07", m: "UI LAYER: TERMINAL MODE", c: "ok", d: 900 },
    { t: "00:00:09", m: "ACCESS: GRANTED", c: "ok", d: 1250 },
  ],
  "/about": [
    { t: "00:00:01", m: "PROFILE REQUEST: OPERATOR", c: "cyan", d: 0 },
    { t: "00:00:03", m: "AUTH: VERIFIED", c: "ok", d: 350 },
    { t: "00:00:05", m: "PULLING RECORDS: HISTORY / INTENT", c: "pink", d: 700 },
    { t: "00:00:07", m: "LOADED: OPERATOR PROFILE", c: "ok", d: 1100 },
  ],
  "/channels": [
    { t: "00:00:01", m: "COMMS INTERFACE: OPEN", c: "cyan", d: 0 },
    { t: "00:00:03", m: "UPLINK: ESTABLISHED", c: "ok", d: 400 },
    { t: "00:00:05", m: "ROUTING: MULTI-CHANNEL SIGNAL", c: "pink", d: 750 },
    { t: "00:00:07", m: "READY: BROADCAST LINKS", c: "ok", d: 1050 },
  ],
  "/modding": [
    { t: "00:00:01", m: "MOD STACK: QUERY", c: "cyan", d: 0 },
    { t: "00:00:03", m: "INDEX: NEXUS COLLECTION", c: "pink", d: 450 },
    { t: "00:00:05", m: "BUILD PIPELINE: INITIALIZING", c: "ok", d: 850 },
    { t: "00:00:07", m: "STATUS: UNDER CONSTRUCTION", c: "warn", d: 1200 },
  ],
};

const baseLines =
  logsByRoute[path] ??
  [
    { t: "00:00:01", m: "NODE ONLINE // STARBOYCHAD.COM", c: "cyan", d: 0 },
    { t: "00:00:03", m: `ROUTE: ${route}`, c: "pink", d: 450 },
    { t: "00:00:05", m: "SESSION: READY", c: "ok", d: 850 },
  ];

// One dynamic “alive” line each load
const dynamicPool = [
  { m: "PING: NIGHT CITY RELAY OK", c: "ok" },
  { m: "TRACE ROUTE: GHOSTED", c: "cyan" },
  { m: "LATENCY: 12ms", c: "ok" },
  { m: "STACK STATE: CLEAN", c: "ok" },
  { m: "FIREWALL: NOMINAL", c: "cyan" },
];

const logLines = [
  ...baseLines,
  { t: "00:00:11", m: dynamicPool[Math.floor(Math.random() * dynamicPool.length)].m, c: dynamicPool[Math.floor(Math.random() * dynamicPool.length)].c, d: 1500 },
  { t: "00:00:12", m: `SESSION: ${pageLabel} // READY`, c: "cyan", d: 1750 },
];
---

<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width" />
    <title>{title}</title>
    <meta name="description" content={description} />
    <link rel="icon" href="/favicon.svg" />
  </head>

  <body>
    <a class="skip" href="#main">Skip to content</a>
    <div class="bg"></div>

    <!-- Boot overlay (once per session) -->
    <div class="boot" id="boot" aria-hidden="true">
      <div class="bootInner">
        <div class="bootTitle">NEON WASTELAND NODE</div>
        <div class="bootLines" id="bootLines"></div>
        <div class="bootHint">INITIALIZING…</div>
      </div>
    </div>

    <div class="wrap">
      <header class="topbar">
        <a class="brand" href="/" aria-label="Home">
          <span class="led" id="safeToggle" title="Toggle SAFE MODE"></span>
          <span class="brandText">STARBOYCHAD // NODE</span>
        </a>

        <nav class="nav" aria-label="Primary">
          <a class:list={["navLink", path === "/about" && "active"]} href="/about">OPERATOR PROFILE</a>
          <a class:list={["navLink", path === "/channels" && "active"]} href="/channels">COMMS INTERFACE</a>
          <a class:list={["navLink", path === "/modding" && "active"]} href="/modding">MOD STACK</a>
          <a class:list={["navLink", path === "/contact" && "active"]} href="/contact">CONTACT</a>
        </nav>
      </header>

      <section class="terminal" aria-label="Terminal">
        <div class="termHeader">
          <div class="termLeds" aria-hidden="true">
            <span class="tled red"></span>
            <span class="tled yellow"></span>
            <span class="tled green"></span>
          </div>

          <div class="termTitle">
            <span class="tag">ACCESS</span>
            <span class="path">{route}</span>
          </div>

          <div class="termStatus">
            <span class="chip">SECURE</span>
            <span class="chip cyan">LIVE</span>
          </div>
        </div>

        <div class="termGrid">
          <!-- Left log panel -->
          <aside class="log" aria-label="System Log">
            <div class="logHeader">
              <span class="logTitle">SYSTEM LOG</span>
              <span class="logChip">{pageLabel}</span>
            </div>

            <!-- Typed output -->
            <div class="logBody" id="logBody" role="log" aria-live="polite" aria-relevant="additions"></div>

            <!-- Command prompt (Easter egg + utility) -->
            <div class="cmd">
              <span class="prompt">&gt;</span>
              <input
                class="cmdInput"
                id="cmdInput"
                type="text"
                inputmode="text"
                autocomplete="off"
                spellcheck="false"
                aria-label="Command input"
                placeholder="type 'help'…"
              />
            </div>

            <div class="logFooter">
              <span class="pulse"></span>
              <span class="hint">HELP / CLEAR / JACKIN / PROFILE / COMMS / MODS / CONTACT</span>
            </div>

            <!-- Typing + command script -->
            <script define:vars={{ logLines, route }}>
              const prefersReduced = window.matchMedia("(prefers-reduced-motion: reduce)").matches;
              const logEl = document.getElementById("logBody");
              const cmdInput = document.getElementById("cmdInput");
              const safeToggle = document.getElementById("safeToggle");
              const boot = document.getElementById("boot");
              const bootLines = document.getElementById("bootLines");

              if (!logEl) throw new Error("Missing #logBody");
              if (!cmdInput) throw new Error("Missing #cmdInput");

              const sleep = (ms) => new Promise((r) => setTimeout(r, ms));
              const escapeHtml = (s) =>
                String(s)
                  .replaceAll("&", "&amp;")
                  .replaceAll("<", "&lt;")
                  .replaceAll(">", "&gt;")
                  .replaceAll('"', "&quot;")
                  .replaceAll("'", "&#039;");

              // SAFE MODE (Easter egg): reduces intensity
              const SAFE_KEY = "nw_safe_mode";
              function setSafeMode(on) {
                document.documentElement.classList.toggle("safe", on);
                try { sessionStorage.setItem(SAFE_KEY, on ? "1" : "0"); } catch {}
              }
              function getSafeMode() {
                try { return sessionStorage.getItem(SAFE_KEY) === "1"; } catch { return false; }
              }
              setSafeMode(getSafeMode());
              safeToggle?.addEventListener("click", (e) => {
                e.preventDefault();
                setSafeMode(!document.documentElement.classList.contains("safe"));
                addLine("00:00:xx", document.documentElement.classList.contains("safe") ? "SAFE MODE: ENABLED" : "SAFE MODE: DISABLED", "warn");
              });

              // Boot overlay once per session
              const BOOT_KEY = "nw_boot_seen";
              async function runBootOnce() {
                if (!boot || !bootLines) return;
                if (prefersReduced) { boot.style.display = "none"; return; }

                let seen = false;
                try { seen = sessionStorage.getItem(BOOT_KEY) === "1"; } catch {}
                if (seen) { boot.style.display = "none"; return; }

                const bootSeq = [
                  "INITIALIZING NODE…",
                  "CHECKING MEMORY… OK",
                  "UPLINK ESTABLISHED…",
                  "VERIFYING KEYS… OK",
                  "ACCESS GRANTED",
                ];

                bootLines.innerHTML = "";
                boot.classList.add("show");

                for (const line of bootSeq) {
                  const div = document.createElement("div");
                  div.className = "bootLine";
                  div.textContent = line;
                  bootLines.appendChild(div);
                  await sleep(220);
                }

                await sleep(550);
                boot.classList.add("hide");

                try { sessionStorage.setItem(BOOT_KEY, "1"); } catch {}
                await sleep(420);
                boot.style.display = "none";
              }

              function addLine(ts, msg, cls = "") {
                const row = document.createElement("div");
                row.className = "logLine";
                row.innerHTML =
                  `<span class="ts">${escapeHtml(ts)}</span>` +
                  `<span class="msg ${escapeHtml(cls)}"></span>`;
                const msgEl = row.querySelector(".msg");
                msgEl.textContent = msg;
                logEl.appendChild(row);
                logEl.scrollTop = logEl.scrollHeight;
                return { row, msgEl };
              }

              async function typeLineNow(ts, msg, cls = "") {
                const row = document.createElement("div");
                row.className = "logLine";
                row.innerHTML =
                    `<span class="ts">${escapeHtml(ts)}</span>` +
                    `<span class="msg ${escapeHtml(cls)}"></span>`;
                logEl.appendChild(row);

                const msgEl = row.querySelector(".msg");

                // Reduced motion: render instantly
                if (prefersReduced) {
                    msgEl.textContent = String(msg);
                    logEl.scrollTop = logEl.scrollHeight;
                    return;
                }

                const text = String(msg);
                let i = 0;
                while (i <= text.length) {
                    msgEl.textContent = text.slice(0, i);
                    i += 1;
                    await sleep(10 + Math.random() * 18);
                    logEl.scrollTop = logEl.scrollHeight;
                }
                }

              window.NW_LOG = { addLine, typeLine: typeLineNow, sleep };

              async function typeLine({ t, m, c, d }) {
                const row = document.createElement("div");
                row.className = "logLine";
                row.innerHTML = `<span class="ts">${escapeHtml(t)}</span><span class="msg ${escapeHtml(c || "")}"></span>`;
                logEl.appendChild(row);

                const msgEl = row.querySelector(".msg");

                if (prefersReduced) {
                  msgEl.textContent = String(m);
                  logEl.scrollTop = logEl.scrollHeight;
                  return;
                }

                if (d) await sleep(d);

                const text = String(m);
                let i = 0;
                while (i <= text.length) {
                  msgEl.textContent = text.slice(0, i);
                  i += 1;
                  await sleep(10 + Math.random() * 18);
                  logEl.scrollTop = logEl.scrollHeight;
                }
              }

              async function runLog() {
                logEl.innerHTML = "";

                for (const line of logLines) {
                  await typeLine(line);
                  await sleep(120);
                }

                // Tail line w/ blinking cursor
                const tail = document.createElement("div");
                tail.className = "logLine dim tail";
                tail.innerHTML = `<span class="ts">00:00:14</span><span class="msg">WAITING INPUT...</span>`;
                logEl.appendChild(tail);
                logEl.scrollTop = logEl.scrollHeight;
              }

              // Commands
              const commands = {
                help() {
                    addLine("00:00:xx", "COMMANDS:", "cyan");
                    addLine("00:00:xx", "help   | clear  | jackin", "pink");
                    addLine("00:00:xx", "profile| comms  | mods", "pink");
                    addLine("00:00:xx", "contact", "pink");
                    addLine("00:00:xx", "tip: click the top LED for SAFE MODE", "warn");
                },
                clear() {
                    logEl.innerHTML = "";
                    addLine("00:00:xx", "BUFFER CLEARED", "ok");
                },
                jackin() {
                    addLine("00:00:xx", "JACKING IN…", "cyan");
                    addLine("00:00:xx", "SYNC: COMPLETE", "ok");
                    addLine("00:00:xx", `ROUTE: ${route}`, "pink");
                },

                // New primary commands
                profile() { window.location.href = "/about"; },
                comms() { window.location.href = "/channels"; },
                mods() { window.location.href = "/modding"; },
                contact() { window.location.href = "/contact"; },

                // Backward-compatible aliases
                about() { window.location.href = "/about"; },
                channels() { window.location.href = "/channels"; },
                modding() { window.location.href = "/modding"; },
                };


              cmdInput.addEventListener("keydown", (e) => {
                if (e.key !== "Enter") return;
                const raw = cmdInput.value.trim();
                if (!raw) return;

                addLine("00:00:xx", `> ${raw}`, "cyan");
                cmdInput.value = "";

                const cmd = raw.toLowerCase().split(" ")[0];
                if (commands[cmd]) commands[cmd]();
                else addLine("00:00:xx", `UNKNOWN COMMAND: ${cmd} (try 'help')`, "err");
              });

              // Kickoff
              runBootOnce().then(runLog);
              setTimeout(() => cmdInput.focus(), prefersReduced ? 0 : 1400);
            </script>
          </aside>

          <!-- Right content -->
          <main id="main" class="termBody">
            <slot />
          </main>
        </div>
      </section>

      <footer class="footer">
        <span class="faint">NEON WASTELAND OPS</span>
        <span class="sep">::</span>
        <span class="faint">SIGNAL OK</span>
      </footer>
    </div>

    <!-- IMPORTANT: global styles (so JS-created log lines get colored) -->
    <style is:global>
      :root{
        --bg: #05060a;
        --panel: rgba(8,10,16,0.72);
        --panel2: rgba(0,0,0,0.25);
        --text: rgba(255,255,255,0.92);
        --line: rgba(255,255,255,0.10);

        --cyan: rgba(34,211,238,1);
        --pink: rgba(232,121,249,1);
        --ok: rgba(74,222,128,1);
        --warn: rgba(250,204,21,1);
        --err: rgba(248,113,113,1);

        --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
        --sans: system-ui, -apple-system, Segoe UI, Roboto, Arial;
      }

      html.safe{
        /* SAFE MODE dials everything down */
        filter: saturate(0.9) contrast(0.98);
      }
      html.safe .pulse,
      html.safe .led{ box-shadow: none !important; }
      html.safe .terminal{ backdrop-filter: none; }
      html.safe .termBody::before{ opacity: 0.25 !important; }

      body{
        margin:0;
        color: var(--text);
        background: var(--bg);
        font-family: var(--sans);
      }

      .skip{
        position:absolute; left:-999px; top:12px;
        padding:10px 12px; border-radius: 10px;
        border:1px solid rgba(255,255,255,0.18);
        background: rgba(0,0,0,0.65);
        color:#fff; text-decoration:none;
        letter-spacing: 0.18em; text-transform: uppercase; font-size: 10px;
        z-index: 30;
      }
      .skip:focus{ left: 12px; }

      /* Background (subtle) */
      .bg{
        position:fixed; inset:0; pointer-events:none;
        background:
          radial-gradient(650px 650px at 55% -10%, rgba(232,121,249,0.14), transparent 60%),
          radial-gradient(800px 800px at 25% 110%, rgba(34,211,238,0.12), transparent 60%),
          radial-gradient(circle at 1px 1px, rgba(255,255,255,0.03) 1px, transparent 0);
        background-size: auto, auto, 22px 22px;
        background-color: var(--bg);
      }

      .wrap{
        max-width: 1120px;
        margin: 0 auto;
        padding: 28px 16px 40px;
        min-height: 100vh;
      }

      /* Boot overlay */
      .boot{
        position: fixed;
        inset: 0;
        display: none;
        place-items: center;
        background: rgba(0,0,0,0.82);
        z-index: 100;
      }
      .boot.show{ display: grid; }
      .bootInner{
        width: min(680px, 92vw);
        border: 1px solid rgba(255,255,255,0.12);
        border-radius: 16px;
        background: rgba(8,10,16,0.72);
        box-shadow: 0 30px 120px rgba(0,0,0,0.7);
        padding: 18px 18px 14px;
        font-family: var(--mono);
      }
      .bootTitle{
        letter-spacing: 0.28em;
        text-transform: uppercase;
        font-size: 11px;
        opacity: 0.85;
      }
      .bootLines{ margin-top: 12px; display:flex; flex-direction:column; gap: 8px; }
      .bootLine{ font-size: 12px; letter-spacing: 0.08em; opacity: 0.92; color: rgba(34,211,238,0.95); }
      .bootHint{
        margin-top: 12px;
        font-size: 10px;
        letter-spacing: 0.22em;
        text-transform: uppercase;
        opacity: 0.55;
      }
      .boot.hide{
        animation: bootfade 0.35s ease forwards;
      }
      @keyframes bootfade{
        to { opacity: 0; transform: translateY(6px); }
      }

      /* Top bar */
      .topbar{
        display:flex; align-items:center; justify-content:space-between;
        gap:16px; margin-bottom: 14px;
      }

      .brand{
        display:flex; align-items:center; gap:10px;
        text-decoration:none; color: var(--text);
        font-family: var(--mono);
        letter-spacing: 0.22em;
        text-transform: uppercase;
        font-size: 11px;
        opacity: 0.92;
      }

      .led{
        width:10px; height:10px; border-radius:999px;
        background: rgba(34,211,238,0.95);
        box-shadow: 0 0 18px rgba(34,211,238,0.55);
        cursor: pointer;
      }

      .nav{
        display:flex; gap:12px; align-items:center; flex-wrap:wrap;
        font-family: var(--mono);
      }

      .navLink{
        color: var(--text);
        text-decoration:none;
        font-size: 11px;
        letter-spacing: 0.20em;
        text-transform: uppercase;
        opacity: 0.65;
        padding: 6px 10px;
        border: 1px solid transparent;
        border-radius: 10px;
        background: transparent;
      }
      .navLink:hover{
        opacity: 1;
        border-color: rgba(255,255,255,0.10);
        background: rgba(255,255,255,0.04);
      }
      .navLink.active{
        opacity: 1;
        border-color: rgba(34,211,238,0.22);
        background: rgba(34,211,238,0.06);
        box-shadow: 0 0 18px rgba(34,211,238,0.10);
      }

      /* Terminal frame */
      .terminal{
        border: 1px solid rgba(255,255,255,0.12);
        background: var(--panel);
        border-radius: 16px;
        overflow: hidden;
        box-shadow:
          0 20px 80px rgba(0,0,0,0.55),
          0 0 0 1px rgba(255,255,255,0.05);
        backdrop-filter: blur(12px);
      }

      .termHeader{
        display:flex;
        align-items:center;
        justify-content:space-between;
        gap: 12px;
        padding: 12px 14px;
        border-bottom: 1px solid rgba(255,255,255,0.10);
        background: linear-gradient(to bottom, rgba(255,255,255,0.06), rgba(255,255,255,0.02));
        font-family: var(--mono);
      }

      .termLeds{ display:flex; gap:8px; align-items:center; }
      .tled{ width:10px; height:10px; border-radius:999px; opacity: 0.9; }
      .tled.red{ background: rgba(248,113,113,0.9); box-shadow: 0 0 10px rgba(248,113,113,0.35); }
      .tled.yellow{ background: rgba(250,204,21,0.9); box-shadow: 0 0 10px rgba(250,204,21,0.35); }
      .tled.green{ background: rgba(74,222,128,0.9); box-shadow: 0 0 10px rgba(74,222,128,0.35); }

      .termTitle{ display:flex; align-items:center; gap:10px; min-width: 0; opacity: 0.9; }
      .tag{
        font-size: 10px;
        letter-spacing: 0.22em;
        text-transform: uppercase;
        padding: 5px 10px;
        border-radius: 999px;
        border: 1px solid rgba(232,121,249,0.22);
        background: rgba(232,121,249,0.08);
        box-shadow: 0 0 16px rgba(232,121,249,0.08);
        white-space: nowrap;
      }
      .path{
        font-size: 11px;
        letter-spacing: 0.10em;
        opacity: 0.75;
        overflow:hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
        max-width: 44vw;
      }

      .termStatus{ display:flex; gap:8px; align-items:center; }
      .chip{
        font-size: 10px;
        letter-spacing: 0.22em;
        text-transform: uppercase;
        padding: 5px 10px;
        border-radius: 999px;
        border: 1px solid rgba(255,255,255,0.14);
        background: rgba(255,255,255,0.04);
        opacity: 0.85;
        white-space: nowrap;
      }
      .chip.cyan{
        border-color: rgba(34,211,238,0.25);
        background: rgba(34,211,238,0.08);
        box-shadow: 0 0 18px rgba(34,211,238,0.12);
      }

      .termGrid{
        display:grid;
        grid-template-columns: 340px 1fr;
        min-height: 560px;
      }

      /* Log panel */
      .log{
        border-right: 1px solid rgba(255,255,255,0.10);
        background: rgba(0,0,0,0.22);
        font-family: var(--mono);
        display:flex;
        flex-direction:column;
        min-width: 0;
      }

      .logHeader{
        display:flex;
        align-items:center;
        justify-content:space-between;
        gap:10px;
        padding: 12px 12px;
        border-bottom: 1px solid rgba(255,255,255,0.10);
        background: rgba(255,255,255,0.03);
      }

      .logTitle{
        font-size: 10px;
        letter-spacing: 0.28em;
        text-transform: uppercase;
        opacity: 0.75;
      }

      .logChip{
        font-size: 10px;
        letter-spacing: 0.20em;
        text-transform: uppercase;
        padding: 4px 10px;
        border-radius: 999px;
        border: 1px solid rgba(34,211,238,0.22);
        background: rgba(34,211,238,0.07);
        box-shadow: 0 0 16px rgba(34,211,238,0.08);
        opacity: 0.9;
        white-space: nowrap;
      }

      .logBody{
        padding: 12px 12px 10px;
        display:flex;
        flex-direction:column;
        gap: 8px;
        overflow:auto;
        max-height: 520px;
      }

      .logLine{
        display:grid;
        grid-template-columns: 74px 1fr;
        gap: 10px;
        align-items:baseline;
      }

      .ts{
        font-size: 10px;
        letter-spacing: 0.12em;
        opacity: 0.55;
        white-space: nowrap;
      }

      .msg{
        font-size: 11px;
        letter-spacing: 0.06em;
        opacity: 0.90;
        line-height: 1.35;
        color: rgba(255,255,255,0.92);
      }

      .msg.cyan{ color: rgba(34,211,238,1); text-shadow: 0 0 12px rgba(34,211,238,0.35); }
      .msg.pink{ color: rgba(232,121,249,1); text-shadow: 0 0 12px rgba(232,121,249,0.35); }
      .msg.ok{ color: rgba(74,222,128,1); text-shadow: 0 0 10px rgba(74,222,128,0.25); }
      .msg.warn{ color: rgba(250,204,21,1); text-shadow: 0 0 10px rgba(250,204,21,0.35); }
      .msg.err{ color: rgba(248,113,113,1); text-shadow: 0 0 10px rgba(248,113,113,0.35); }

      .dim .msg{ opacity: 0.65; }

      .tail .msg::after{
        content:"";
        display:inline-block;
        width: 8px;
        height: 12px;
        margin-left: 6px;
        transform: translateY(2px);
        background: rgba(34,211,238,0.65);
        animation: cursor 0.9s steps(1) infinite;
      }
      @keyframes cursor{ 50%{ opacity: 0; } }

      /* Command bar */
      .cmd{
        display:flex;
        align-items:center;
        gap: 10px;
        padding: 10px 12px 10px;
        border-top: 1px solid rgba(255,255,255,0.10);
        border-bottom: 1px solid rgba(255,255,255,0.10);
        background: rgba(255,255,255,0.02);
        font-family: var(--mono);
      }
      .prompt{
        opacity: 0.75;
        color: rgba(34,211,238,0.9);
        text-shadow: 0 0 10px rgba(34,211,238,0.25);
      }
      .cmdInput{
        width: 100%;
        background: transparent;
        border: 0;
        outline: none;
        color: rgba(255,255,255,0.92);
        font-family: var(--mono);
        font-size: 12px;
        letter-spacing: 0.08em;
      }
      .cmdInput::placeholder{
        color: rgba(255,255,255,0.35);
        letter-spacing: 0.08em;
      }

      .logFooter{
        margin-top:auto;
        padding: 10px 12px;
        border-top: 1px solid rgba(255,255,255,0.10);
        background: rgba(255,255,255,0.03);
        display:flex;
        align-items:center;
        gap: 10px;
      }

      .pulse{
        width:10px; height:10px; border-radius:999px;
        background: rgba(34,211,238,0.85);
        box-shadow: 0 0 16px rgba(34,211,238,0.45);
        animation: pulse 1.4s ease-in-out infinite;
      }
      @keyframes pulse{
        0%, 100% { transform: scale(1); opacity: 0.9; }
        50% { transform: scale(1.35); opacity: 0.65; }
      }

      .hint{
        font-size: 10px;
        letter-spacing: 0.18em;
        text-transform: uppercase;
        opacity: 0.55;
        white-space: nowrap;
        overflow:hidden;
        text-overflow: ellipsis;
      }

      /* Content panel (glass + CRT inside content) */
      .termBody{
        position: relative;
        padding: 22px 18px 26px;
        background: var(--panel2);
        box-shadow: inset 0 0 0 1px rgba(255,255,255,0.06);
      }

      /* CRT scanlines */
      .termBody::before{
        content:"";
        position:absolute; inset:0;
        pointer-events:none;
        background: repeating-linear-gradient(
          to bottom,
          rgba(0,0,0,0.22),
          rgba(0,0,0,0.22) 2px,
          rgba(255,255,255,0.02) 2px,
          rgba(255,255,255,0.02) 6px
        );
        opacity: 0.45;
        mix-blend-mode: overlay;
      }

      /* Grid */
      .termBody::after{
        content:"";
        position:absolute; inset:0;
        pointer-events:none;
        background:
          linear-gradient(rgba(255,255,255,0.06) 1px, transparent 1px),
          linear-gradient(90deg, rgba(255,255,255,0.06) 1px, transparent 1px);
        background-size: 40px 40px;
        opacity: 0.05;
      }

      /* Rare flicker (feels like a screen, not an animation demo) */
      .terminal{
        animation: flicker 22s infinite;
      }
      @keyframes flicker{
        0%, 96%, 100% { filter: none; }
        97% { filter: brightness(1.02) contrast(1.01); }
        98% { filter: brightness(0.98) contrast(1.02); }
        99% { filter: brightness(1.01) contrast(1.01); }
      }

      /* Ensure slot content sits above overlays */
      .termBody > *{ position: relative; z-index: 1; }

      /* Terminal typography defaults */
      .terminal h1{
        font-family: var(--mono);
        letter-spacing: 0.10em;
        text-transform: uppercase;
      }
      .terminal p{
        font-size: 16px;
        line-height: 1.7;
        opacity: 0.92;
        max-width: 78ch;
      }
      .terminal a{
        color: rgba(34,211,238,0.95);
      }
      .terminal a:hover{
        color: rgba(232,121,249,0.95);
      }

      .footer{
        margin-top: 14px;
        display:flex;
        align-items:center;
        gap: 10px;
        justify-content:center;
        font-family: var(--mono);
        font-size: 10px;
        letter-spacing: 0.28em;
        text-transform: uppercase;
        opacity: 0.55;
      }
      .sep{ opacity: 0.45; }
      .faint{ opacity: 0.85; }

      @media (max-width: 980px){
        .termGrid{ grid-template-columns: 1fr; }
        .log{ border-right: none; border-bottom: 1px solid rgba(255,255,255,0.10); }
        .path{ max-width: 70vw; }
      }

      @media (prefers-reduced-motion: reduce){
        .pulse{ animation: none; }
        .tail .msg::after{ animation: none; opacity: 0.7; }
        .terminal{ animation: none; }
      }
    </style>
  </body>
</html>
